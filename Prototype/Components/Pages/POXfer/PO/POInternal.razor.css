/* PO Internal Page - Shares PO Detail Section Styles with PO.razor */
/* All primitives (.card, .btn, .badge, .link, .title) are defined in wwwroot/app.css */

/* Wrapper */
.po-internal-page-wrapper {
    display: flex;
    flex-direction: column;
    height: 100%;
    overflow: hidden;
}

/* ===== PO Detail Section ===== */
/* Default (Spacious) density - baseline styling */
.rop-detail {
    padding: var(--po-detail-padding-y, 1rem) var(--po-detail-padding-x, 1.5rem);
    transition: all 0.3s ease;
}

    .rop-detail.collapsed {
        padding: 0;
        max-height: 0;
        overflow: hidden;
        opacity: 0;
    }

.rop-detail-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--po-detail-grid-gap, 1.5rem);
}

.rop-detail .col {
    display: flex;
    flex-direction: column;
    gap: var(--po-detail-col-gap, 0.5rem);
}

.rop-detail .col-right {
    border-left: 1px solid var(--border);
    padding-left: var(--po-detail-grid-gap, 1.5rem);
}

/* Field styling - HORIZONTAL LAYOUT */
.rop-detail .field {
    display: grid;
    grid-template-columns: var(--po-detail-label-width, 140px) 1fr;
    align-items: center;
    gap: var(--po-detail-field-gap, 0.75rem);
    min-height: var(--po-detail-field-height, 32px);
}

    .rop-detail .field label {
        font-size: 0.8125rem;
        font-weight: 600;
        color: var(--muted);
        text-align: right;
        padding-right: var(--po-detail-label-padding, 0.5rem);
    }

    .rop-detail .field input[type="text"],
    .rop-detail .field input:not([type="checkbox"]) {
        padding: var(--po-detail-input-padding-y, 0.375rem) var(--po-detail-input-padding-x, 0.625rem);
        border: 1px solid var(--border);
        border-radius: 3px;
        font-size: 0.875rem;
        background: var(--hover-bg, #f8f9fa);
        color: var(--text);
        height: var(--po-detail-input-height, auto);
    }

    .rop-detail .field input:read-only {
        cursor: default;
    }

    .rop-detail .field textarea {
        padding: var(--po-detail-input-padding-y, 0.375rem) var(--po-detail-input-padding-x, 0.625rem);
        border: 1px solid var(--border);
        border-radius: 3px;
        font-size: 0.875rem;
        background: var(--hover-bg, #f8f9fa);
        color: var(--text);
        min-height: var(--po-detail-textarea-height, 50px);
        resize: vertical;
        font-family: inherit;
    }

        .rop-detail .field textarea:read-only {
            cursor: default;
        }

    /* Checkbox field - keep horizontal but adjusted for new layout */
    .rop-detail .field.check {
        display: flex;
        flex-direction: row;
        align-items: center;
        gap: var(--po-detail-field-gap, 0.75rem);
    }

        .rop-detail .field.check label {
            text-align: left;
            padding-right: 0;
            min-width: var(--po-detail-label-width, 140px);
        }

        .rop-detail .field.check input[type="checkbox"] {
            width: 16px;
            height: 16px;
            cursor: default;
        }

/* City/State/Zip row - inline alignment */
.rop-detail .field-row {
    display: flex;
    gap: var(--po-detail-field-gap, 0.75rem);
    align-items: center;
    min-height: var(--po-detail-field-height, 32px);
    margin-left: calc(var(--po-detail-label-width, 140px) + var(--po-detail-field-gap, 0.75rem));
}

.rop-detail .field-col {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

    .rop-detail .field-col.sm {
        flex: 0 0 auto;
    }

    .rop-detail .field-col label {
        font-size: 0.75rem;
        font-weight: 600;
        color: var(--muted);
        white-space: nowrap;
    }

    .rop-detail .field-col input {
        padding: var(--po-detail-input-padding-y, 0.375rem) var(--po-detail-input-padding-x, 0.625rem);
        border: 1px solid var(--border);
        border-radius: 3px;
        font-size: 0.875rem;
        background: var(--hover-bg, #f8f9fa);
        color: var(--text);
        width: 70px;
        padding-left: 8px;
        height: var(--po-detail-input-height, auto);
    }

/* Link styling */
.rop-detail .link {
    color: var(--accent);
    text-decoration: none;
    font-size: 0.875rem;
    font-weight: 500;
    display: inline-flex;
    align-items: center;
    padding: 0.25rem 0;
    margin-left: var(--po-detail-label-width, 140px);
}

    .rop-detail .link:hover {
        text-decoration: underline;
    }

/* Toggle button for collapsing */
.detail-toggle-btn {
    background: transparent;
    border: 1px solid var(--border);
    color: var(--text);
    padding: 0.375rem 0.75rem;
    border-radius: 4px;
    font-size: 0.875rem;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    transition: all 0.2s ease;
}

    .detail-toggle-btn:hover {
        background: var(--hover-bg, #f8f9fa);
    }

    .detail-toggle-btn .toggle-icon {
        transition: transform 0.3s ease;
    }

    .detail-toggle-btn.collapsed .toggle-icon {
        transform: rotate(-90deg);
    }

/* ===== DENSITY MODES ===== */

/* SPACIOUS MODE (Default/Baseline) - Keep current spacing */
[data-density="spacious"] .rop-detail {
    --po-detail-padding-y: 1.25rem;
    --po-detail-padding-x: 2rem;
    --po-detail-grid-gap: 2rem;
    --po-detail-col-gap: 0.625rem;
    --po-detail-label-width: 150px;
    --po-detail-field-gap: 1rem;
    --po-detail-field-height: 36px;
    --po-detail-label-padding: 0.625rem;
    --po-detail-input-padding-y: 0.5rem;
    --po-detail-input-padding-x: 0.75rem;
    --po-detail-input-height: 36px;
    --po-detail-textarea-height: 60px;
}

/* COMFORTABLE MODE (Middle Ground) - 2x2 Sub-Grid Layout */
[data-density="comfortable"] .rop-detail {
    --po-detail-padding-y: 1rem;
    --po-detail-padding-x: 1.5rem;
    --po-detail-grid-gap: 1.5rem;
    --po-detail-col-gap: 0.5rem;
    --po-detail-label-width: 125px;
    --po-detail-field-gap: 0.625rem;
    --po-detail-field-height: 32px;
    --po-detail-label-padding: 0.5rem;
    --po-detail-input-padding-y: 0.375rem;
    --po-detail-input-padding-x: 0.625rem;
    --po-detail-input-height: auto;
    --po-detail-textarea-height: 50px;
}

/* Comfortable: Convert each column to a 2-column sub-grid */
[data-density="comfortable"] .rop-detail .col {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: var(--po-detail-col-gap, 0.5rem) 0.75rem;
    align-items: start;
}

/* Comfortable: Left group field positioning (2 fields per row) */
[data-density="comfortable"] .field--po-number { grid-column: 1; grid-row: 1; }
[data-density="comfortable"] .field--vendor { grid-column: 2; grid-row: 1; }
[data-density="comfortable"] .field--ship-to { grid-column: 1; grid-row: 2; }
[data-density="comfortable"] .field--attention { grid-column: 2; grid-row: 2; }
[data-density="comfortable"] .field--address1 { grid-column: 1; grid-row: 3; }
[data-density="comfortable"] .field--address2 { grid-column: 2; grid-row: 3; }

/* Comfortable: City/State/Zip spans both columns in left group */
[data-density="comfortable"] .field--citystatezip {
    grid-column: 1 / 3;
    grid-row: 4;
}

/* Comfortable: Special Instructions spans both columns in left group */
[data-density="comfortable"] .field--special-instructions {
    grid-column: 1 / 3;
    grid-row: 5;
}

/* Comfortable: View Activities link spans both columns in left group */
[data-density="comfortable"] .field--view-activities {
    grid-column: 1 / 3;
    grid-row: 6;
}

/* Comfortable: Right group field positioning (2 fields per row) */
[data-density="comfortable"] .field--po-date { grid-column: 1; grid-row: 1; }
[data-density="comfortable"] .field--sales-order { grid-column: 2; grid-row: 1; }
[data-density="comfortable"] .field--po-status { grid-column: 1; grid-row: 2; }
[data-density="comfortable"] .field--default-ship { grid-column: 2; grid-row: 2; }
[data-density="comfortable"] .field--premium-ship { grid-column: 1; grid-row: 3; }
[data-density="comfortable"] .field--rally-pricing { grid-column: 2; grid-row: 3; }
[data-density="comfortable"] .field--no-paperwork { grid-column: 1; grid-row: 4; }
[data-density="comfortable"] .field--lift-gate { grid-column: 2; grid-row: 4; }
[data-density="comfortable"] .field--total-cost { grid-column: 1; grid-row: 5; }
[data-density="comfortable"] .field--open-cost { grid-column: 2; grid-row: 5; }

/* Comfortable: Comments spans both columns in right group */
[data-density="comfortable"] .field--comments {
    grid-column: 1 / 3;
    grid-row: 6;
}

/* Comfortable: Bottom flags span both columns in right group */
[data-density="comfortable"] .field--release-bkos { grid-column: 1; grid-row: 7; }
[data-density="comfortable"] .field--bko-unfilled { grid-column: 2; grid-row: 7; }

/* COMPACT MODE (Space-Optimized) - STRUCTURAL REDESIGN */
[data-density="compact"] .rop-detail {
    --po-detail-padding-y: 0.5rem;
    --po-detail-padding-x: 0.75rem;
    --po-detail-grid-gap: 0.5rem;
    --po-detail-col-gap: 0.375rem;
    --po-detail-label-width: 85px;
    --po-detail-field-gap: 0.375rem;
    --po-detail-field-height: 24px;
    --po-detail-label-padding: 0.25rem;
    --po-detail-input-padding-y: 0.25rem;
    --po-detail-input-padding-x: 0.5rem;
    --po-detail-input-height: 24px;
    --po-detail-textarea-height: 48px;
}

/* Compact: Convert to 5-column dense grid layout */
[data-density="compact"] .rop-detail-grid {
    display: grid;
    grid-template-columns: repeat(5, minmax(0, 1fr));
    gap: 0.5rem 0.75rem;
    align-items: start;
}

/* Compact: Remove column structure, use direct grid placement */
[data-density="compact"] .rop-detail .col {
    display: contents; /* Flatten column wrappers */
}

[data-density="compact"] .rop-detail .col-right {
    border-left: none;
    padding-left: 0;
}

/* Compact: Inline label/value layout with DE-EMPHASIZED labels */
[data-density="compact"] .rop-detail .field {
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 0.375rem;
    min-height: 24px;
}

[data-density="compact"] .rop-detail .field label {
    font-size: 0.6875rem; /* 11px - smaller */
    font-weight: 500; /* lighter than 600 */
    color: var(--muted); /* use muted color */
    text-align: left;
    padding-right: 0;
    white-space: nowrap;
    flex-shrink: 0;
    min-width: auto;
}

[data-density="compact"] .rop-detail .field input:not([type="checkbox"]),
[data-density="compact"] .rop-detail .field textarea {
    font-size: 0.8125rem; /* 13px - values remain prominent */
    flex: 1;
    min-width: 0;
    /* Restore proper field styling for readability */
    border: 1px solid var(--border);
    background: var(--hover-bg, #f8f9fa);
    border-radius: 3px;
    padding: var(--po-detail-input-padding-y, 0.25rem) var(--po-detail-input-padding-x, 0.5rem);
}

/* ===== CLASS-BASED GRID POSITIONING (NO nth-child) - 5 COLUMN LAYOUT ===== */
/* Row 1: PO Metadata (5 fields across) */
[data-density="compact"] .field--po-number { grid-column: 1; grid-row: 1; }
[data-density="compact"] .field--po-date { grid-column: 2; grid-row: 1; }
[data-density="compact"] .field--po-status { grid-column: 3; grid-row: 1; }
[data-density="compact"] .field--sales-order { grid-column: 4; grid-row: 1; }
[data-density="compact"] .field--vendor { grid-column: 5; grid-row: 1; }

/* Row 2: Shipping Info (5 fields across) */
[data-density="compact"] .field--ship-to { grid-column: 1; grid-row: 2; }
[data-density="compact"] .field--default-ship { grid-column: 2; grid-row: 2; }
[data-density="compact"] .field--premium-ship { grid-column: 3; grid-row: 2; }
[data-density="compact"] .field--total-cost { grid-column: 4; grid-row: 2; }
[data-density="compact"] .field--open-cost { grid-column: 5; grid-row: 2; }

/* Row 3: Address (5 fields across) */
[data-density="compact"] .field--attention { grid-column: 1; grid-row: 3; }
[data-density="compact"] .field--address1 { grid-column: 2; grid-row: 3; }
[data-density="compact"] .field--address2 { grid-column: 3; grid-row: 3; }
[data-density="compact"] .field--citystatezip { grid-column: 4; grid-row: 3; }
[data-density="compact"] .field--view-activities {
    grid-column: 5;
    grid-row: 3;
    justify-content: flex-end;
}

/* Row 4: Flags Group (spans full width) */
[data-density="compact"] .flags-group {
    grid-column: 1 / 6;
    grid-row: 4;
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
    align-items: center;
    min-height: 24px;
}

/* Hide individual boolean fields in compact (replaced by flags-group) */
[data-density="compact"] .field--rally-pricing,
[data-density="compact"] .field--no-paperwork,
[data-density="compact"] .field--lift-gate,
[data-density="compact"] .field--release-bkos,
[data-density="compact"] .field--bko-unfilled {
    display: none !important;
}

/* Row 5: Notes (span 2-3 columns each for better readability) */
[data-density="compact"] .field--special-instructions { grid-column: 1 / 4; grid-row: 5; }
[data-density="compact"] .field--comments { grid-column: 4 / 6; grid-row: 5; }

/* ===== FLAGS CHIP GROUP STYLING ===== */
/* Hide flags-group in comfortable/spacious modes */
[data-density="comfortable"] .flags-group,
[data-density="spacious"] .flags-group,
.flags-group {
    display: none;
}

/* Compact mode: Show flags-group with readable but subtle styling */
[data-density="compact"] .flag-chip {
    display: inline-flex;
    align-items: center;
    padding: 0.25rem 0.5rem; /* 4px 8px - readable */
    border-radius: 3px;
    font-size: 0.75rem; /* 12px - readable but smaller */
    font-weight: 500;
    white-space: nowrap;
    border: 1px solid var(--border);
    background: var(--hover-bg, #f8f9fa);
    color: var(--text);
    transition: all 0.15s ease;
    line-height: 1.4;
}

[data-density="compact"] .flag-chip.is-on {
    background: var(--hover-bg, #f8f9fa);
    border-color: var(--border);
    color: var(--text);
}

[data-density="compact"] .flag-chip.is-off {
    background: var(--card-bg, #fff);
    border-color: var(--border);
    color: var(--muted);
    opacity: 0.75;
}

/* ===== NOTES FIELD CLAMPING (Compact Only) ===== */
/* Clamp textarea and input to single line with ellipsis */
[data-density="compact"] .field--special-instructions textarea {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    max-height: 24px;
    min-height: 24px;
    height: 24px;
    line-height: 1.5;
    resize: none;
    display: block;
}

[data-density="compact"] .field--comments input {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    max-height: 24px;
}

/* Expand textarea on focus to show full content */
[data-density="compact"] .field--special-instructions textarea:focus {
    white-space: normal;
    overflow-y: auto;
    max-height: 100px;
    height: auto;
    min-height: 48px;
    z-index: 10;
    position: relative;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

/* ===== COMPACT OPTIMIZATIONS ===== */
/* Compact: City/State/Zip inline optimization */
[data-density="compact"] .rop-detail .field-row {
    margin-left: 0;
    gap: 0.375rem;
    flex-wrap: nowrap;
}

[data-density="compact"] .rop-detail .field-col {
    gap: 0.25rem;
}

[data-density="compact"] .rop-detail .field-col label {
    font-size: 0.6875rem;
}

[data-density="compact"] .rop-detail .field-col input {
    width: 50px;
    font-size: 0.8125rem;
}

/* Compact: Link styling */
[data-density="compact"] .rop-detail .link {
    margin-left: 0;
    font-size: 0.8125rem;
    padding: 0;
}

/* Grid section layout */
.grid-section {
    display: flex;
    flex-direction: column;
    flex: 1;
    overflow: hidden;
    margin: var(--spacing-6) var(--spacing-6);
}

.grid-container {
    flex: 1;
    overflow: auto;
    position: relative;
}

/* Link button in grid (behavior-specific styling) */
.link-button {
    background: none;
    border: none;
    color: var(--accent);
    cursor: pointer;
    text-decoration: underline;
    padding: 0;
    font-size: inherit;
}

.link-button:hover {
    color: var(--accent-hover);
}

/* Density adjustments - layout spacing only */
[data-density="compact"] .grid-section {
    margin: var(--spacing-4) var(--spacing-4);
}

[data-density="comfortable"] .grid-section {
    margin: var(--spacing-5) var(--spacing-5);
}

[data-density="spacious"] .grid-section {
    margin: var(--spacing-8) var(--spacing-8);
}

/* ===== RESPONSIVE DESIGN ===== */

/* Tablets and smaller */
@media (max-width: 1024px) {
    /* Comfortable/Spacious modes: revert to single column for top-level groups */
    .rop-detail-grid {
        grid-template-columns: 1fr;
        gap: 1rem;
    }

    .rop-detail .col-right {
        border-left: none;
        border-top: 1px solid var(--border);
        padding-left: 0;
        padding-top: 1rem;
    }

    /* Spacious mode: standard field layout */
    [data-density="spacious"] .rop-detail .field {
        grid-template-columns: 120px 1fr;
    }

    [data-density="spacious"] .rop-detail .field label {
        min-width: 120px;
    }

    [data-density="spacious"] .rop-detail .field-row {
        margin-left: calc(120px + 0.75rem);
    }

    [data-density="spacious"] .rop-detail .link {
        margin-left: 120px;
    }

    [data-density="spacious"] .rop-detail .field.check label {
        min-width: 120px;
    }

    /* Comfortable mode: keep 2-column sub-grid within single column layout */
    [data-density="comfortable"] .rop-detail .col {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: var(--po-detail-col-gap, 0.5rem) 0.75rem;
    }

    /* Comfortable: Maintain all grid positions even on tablet (still 2 fields per row within each group) */
    /* Left group positions remain the same */
    [data-density="comfortable"] .field--po-number { grid-column: 1; grid-row: 1; }
    [data-density="comfortable"] .field--vendor { grid-column: 2; grid-row: 1; }
    [data-density="comfortable"] .field--ship-to { grid-column: 1; grid-row: 2; }
    [data-density="comfortable"] .field--attention { grid-column: 2; grid-row: 2; }
    [data-density="comfortable"] .field--address1 { grid-column: 1; grid-row: 3; }
    [data-density="comfortable"] .field--address2 { grid-column: 2; grid-row: 3; }
    [data-density="comfortable"] .field--citystatezip { grid-column: 1 / 3; grid-row: 4; }
    [data-density="comfortable"] .field--special-instructions { grid-column: 1 / 3; grid-row: 5; }
    [data-density="comfortable"] .field--view-activities { grid-column: 1 / 3; grid-row: 6; }

    /* Right group positions remain the same */
    [data-density="comfortable"] .field--po-date { grid-column: 1; grid-row: 1; }
    [data-density="comfortable"] .field--sales-order { grid-column: 2; grid-row: 1; }
    [data-density="comfortable"] .field--po-status { grid-column: 1; grid-row: 2; }
    [data-density="comfortable"] .field--default-ship { grid-column: 2; grid-row: 2; }
    [data-density="comfortable"] .field--premium-ship { grid-column: 1; grid-row: 3; }
    [data-density="comfortable"] .field--rally-pricing { grid-column: 2; grid-row: 3; }
    [data-density="comfortable"] .field--no-paperwork { grid-column: 1; grid-row: 4; }
    [data-density="comfortable"] .field--lift-gate { grid-column: 2; grid-row: 4; }
    [data-density="comfortable"] .field--total-cost { grid-column: 1; grid-row: 5; }
    [data-density="comfortable"] .field--open-cost { grid-column: 2; grid-row: 5; }
    [data-density="comfortable"] .field--comments { grid-column: 1 / 3; grid-row: 6; }
    [data-density="comfortable"] .field--release-bkos { grid-column: 1; grid-row: 7; }
    [data-density="comfortable"] .field--bko-unfilled { grid-column: 2; grid-row: 7; }

    /* Compact mode: reduce to 2 columns on tablet */
    [data-density="compact"] .rop-detail-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    /* Compact: Reflow grid positioning for 2-column layout using stable classes */
    [data-density="compact"] .field--po-number { grid-column: 1; grid-row: 1; }
    [data-density="compact"] .field--po-date { grid-column: 2; grid-row: 1; }
    [data-density="compact"] .field--po-status { grid-column: 1; grid-row: 2; }
    [data-density="compact"] .field--sales-order { grid-column: 2; grid-row: 2; }
    [data-density="compact"] .field--vendor { grid-column: 1; grid-row: 3; }
    [data-density="compact"] .field--ship-to { grid-column: 2; grid-row: 3; }
    [data-density="compact"] .field--default-ship { grid-column: 1; grid-row: 4; }
    [data-density="compact"] .field--premium-ship { grid-column: 2; grid-row: 4; }
    [data-density="compact"] .field--total-cost { grid-column: 1; grid-row: 5; }
    [data-density="compact"] .field--open-cost { grid-column: 2; grid-row: 5; }
    [data-density="compact"] .field--attention { grid-column: 1; grid-row: 6; }
    [data-density="compact"] .field--address1 { grid-column: 2; grid-row: 6; }
    [data-density="compact"] .field--address2 { grid-column: 1; grid-row: 7; }
    [data-density="compact"] .field--citystatezip { grid-column: 2; grid-row: 7; }
    [data-density="compact"] .field--view-activities { grid-column: 1 / 3; grid-row: 8; justify-content: center; }
    [data-density="compact"] .flags-group { grid-column: 1 / 3; grid-row: 9; }
    [data-density="compact"] .field--special-instructions { grid-column: 1 / 3; grid-row: 10; }
    [data-density="compact"] .field--comments { grid-column: 1 / 3; grid-row: 11; }

    .grid-section {
        margin: var(--spacing-4);
    }
}

/* Mobile */
@media (max-width: 640px) {
    .rop-detail {
        padding: 0.75rem 1rem;
    }

    /* Spacious mode: vertical layout */
    [data-density="spacious"] .rop-detail .field {
        grid-template-columns: 1fr;
        gap: 0.25rem;
    }

    [data-density="spacious"] .rop-detail .field label {
        text-align: left;
        padding-right: 0;
    }

    [data-density="spacious"] .rop-detail .field-row {
        margin-left: 0;
        flex-direction: column;
        align-items: stretch;
        gap: 0.5rem;
    }

    [data-density="spacious"] .rop-detail .field-col {
        width: 100%;
    }

    [data-density="spacious"] .rop-detail .field-col input {
        width: 100%;
    }

    [data-density="spacious"] .rop-detail .link {
        margin-left: 0;
    }

    [data-density="spacious"] .rop-detail .field.check {
        flex-direction: column;
        align-items: flex-start;
    }

    [data-density="spacious"] .rop-detail .field.check label {
        min-width: auto;
    }

    /* Comfortable mode: collapse to single column */
    [data-density="comfortable"] .rop-detail .col {
        display: flex;
        flex-direction: column;
        gap: var(--po-detail-col-gap, 0.5rem);
    }

    /* Comfortable: Reset all grid positioning to natural flow */
    [data-density="comfortable"] .field--po-number,
    [data-density="comfortable"] .field--vendor,
    [data-density="comfortable"] .field--ship-to,
    [data-density="comfortable"] .field--attention,
    [data-density="comfortable"] .field--address1,
    [data-density="comfortable"] .field--address2,
    [data-density="comfortable"] .field--citystatezip,
    [data-density="comfortable"] .field--special-instructions,
    [data-density="comfortable"] .field--view-activities,
    [data-density="comfortable"] .field--po-date,
    [data-density="comfortable"] .field--sales-order,
    [data-density="comfortable"] .field--po-status,
    [data-density="comfortable"] .field--default-ship,
    [data-density="comfortable"] .field--premium-ship,
    [data-density="comfortable"] .field--rally-pricing,
    [data-density="comfortable"] .field--no-paperwork,
    [data-density="comfortable"] .field--lift-gate,
    [data-density="comfortable"] .field--total-cost,
    [data-density="comfortable"] .field--open-cost,
    [data-density="comfortable"] .field--comments,
    [data-density="comfortable"] .field--release-bkos,
    [data-density="comfortable"] .field--bko-unfilled {
        grid-column: auto;
        grid-row: auto;
    }

    /* Comfortable: Vertical label/value layout on mobile */
    [data-density="comfortable"] .rop-detail .field {
        grid-template-columns: 1fr;
        gap: 0.25rem;
    }

    [data-density="comfortable"] .rop-detail .field label {
        text-align: left;
        padding-right: 0;
    }

    [data-density="comfortable"] .rop-detail .field-row {
        margin-left: 0;
    }

    [data-density="comfortable"] .rop-detail .link {
        margin-left: 0;
    }

    [data-density="comfortable"] .rop-detail .field.check label {
        min-width: auto;
    }

    /* Compact mode: single column on mobile */
    [data-density="compact"] .rop-detail-grid {
        grid-template-columns: 1fr;
    }

    /* Compact: Reset all grid positioning to natural flow using stable classes */
    [data-density="compact"] .field--po-number,
    [data-density="compact"] .field--po-date,
    [data-density="compact"] .field--po-status,
    [data-density="compact"] .field--sales-order,
    [data-density="compact"] .field--ship-to,
    [data-density="compact"] .field--default-ship,
    [data-density="compact"] .field--premium-ship,
    [data-density="compact"] .field--vendor,
    [data-density="compact"] .field--attention,
    [data-density="compact"] .field--address1,
    [data-density="compact"] .field--address2,
    [data-density="compact"] .field--citystatezip,
    [data-density="compact"] .flags-group,
    [data-density="compact"] .field--total-cost,
    [data-density="compact"] .field--open-cost,
    [data-density="compact"] .field--view-activities,
    [data-density="compact"] .field--special-instructions,
    [data-density="compact"] .field--comments {
        grid-column: 1;
        grid-row: auto;
    }

    /* Compact: Keep vertical layout for fields */
    [data-density="compact"] .rop-detail .field {
        flex-direction: column;
        align-items: flex-start;
    }

    [data-density="compact"] .rop-detail .field label {
        text-align: left;
    }
}
