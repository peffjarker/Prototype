/* ===== ENHANCED TELERIK DARK MODE FIX ===== */
/* Version 2.0 - More Aggressive Overrides */
/* Use this if the standard fix doesn't work */

/* ===== CRITICAL: This file MUST load AFTER Telerik CSS ===== */

/* ============================================== */
/* GLOBAL TELERIK GRID OVERRIDES - MOST AGGRESSIVE */
/* ============================================== */

/* Grid Container - Force dark background */
[data-theme="dark"] .k-grid,
[data-theme="dark"] .k-grid-container,
[data-theme="dark"] .k-widget.k-grid {
    background-color: var(--card-bg) !important;
    border-color: var(--border) !important;
    color: var(--text) !important;
}

    /* Grid Toolbar */
    [data-theme="dark"] .k-grid-toolbar,
    [data-theme="dark"] .k-toolbar,
    [data-theme="dark"] .k-grid .k-toolbar {
        background-color: var(--header-bg) !important;
        border-color: var(--border) !important;
        color: var(--text) !important;
    }

    /* Grid Header - Force dark */
    [data-theme="dark"] .k-grid-header,
    [data-theme="dark"] .k-grid-header-wrap,
    [data-theme="dark"] .k-grid .k-grid-header,
    [data-theme="dark"] table.k-table thead,
    [data-theme="dark"] .k-table-thead {
        background-color: var(--header-bg) !important;
        border-color: var(--border) !important;
    }

        /* Header Cells */
        [data-theme="dark"] .k-grid th,
        [data-theme="dark"] .k-grid-header th,
        [data-theme="dark"] .k-grid thead th,
        [data-theme="dark"] .k-table th,
        [data-theme="dark"] .k-table-th,
        [data-theme="dark"] th.k-header {
            background-color: var(--header-bg) !important;
            color: var(--text) !important;
            border-color: var(--border) !important;
        }

    /* Grid Content Area */
    [data-theme="dark"] .k-grid-content,
    [data-theme="dark"] .k-grid-content-locked,
    [data-theme="dark"] .k-grid .k-grid-content {
        background-color: var(--app-bg) !important;
    }

        /* Grid Cells - Force dark */
        [data-theme="dark"] .k-grid td,
        [data-theme="dark"] .k-grid-content td,
        [data-theme="dark"] .k-grid tbody td,
        [data-theme="dark"] .k-table td,
        [data-theme="dark"] .k-table-td,
        [data-theme="dark"] td.k-table-td {
            background-color: var(--app-bg) !important;
            color: var(--text) !important;
            border-color: var(--border) !important;
        }

    /* Alternating Rows */
    [data-theme="dark"] .k-grid tr.k-alt td,
    [data-theme="dark"] .k-grid .k-table-row.k-alt td,
    [data-theme="dark"] .k-grid tbody tr:nth-child(even) td,
    [data-theme="dark"] .k-alt > td {
        background-color: var(--card-bg) !important;
    }

    /* Row Hover - More specific */
    [data-theme="dark"] .k-grid tr:hover td,
    [data-theme="dark"] .k-grid tr:hover > td,
    [data-theme="dark"] .k-grid .k-table-row:hover td,
    [data-theme="dark"] .k-grid tbody tr:hover td,
    [data-theme="dark"] .k-grid tr.k-hover td,
    [data-theme="dark"] .k-hover > td {
        background-color: var(--row-hover) !important;
        color: var(--text) !important;
    }

    /* Selected Rows - Force visibility */
    [data-theme="dark"] .k-grid tr.k-selected td,
    [data-theme="dark"] .k-grid tr.k-selected > td,
    [data-theme="dark"] .k-grid .k-table-row.k-selected td,
    [data-theme="dark"] .k-grid .k-selected > td,
    [data-theme="dark"] .k-grid tbody tr.k-selected td {
        background-color: var(--sel-bg) !important;
        color: var(--sel-text) !important;
        border-color: var(--sel-border) !important;
    }

    /* Selected AND Hover - Keep selection visible */
    [data-theme="dark"] .k-grid tr.k-selected:hover td,
    [data-theme="dark"] .k-grid tr.k-selected:hover > td {
        background-color: var(--sel-bg) !important;
        color: var(--sel-text) !important;
    }

    /* Grid Footer */
    [data-theme="dark"] .k-grid-footer,
    [data-theme="dark"] .k-grid-footer-wrap,
    [data-theme="dark"] .k-grid .k-grid-footer {
        background-color: var(--header-bg) !important;
        border-color: var(--border) !important;
        color: var(--text) !important;
    }

        /* Footer Cells */
        [data-theme="dark"] .k-grid-footer td,
        [data-theme="dark"] .k-grid-footer .k-table-td {
            background-color: var(--header-bg) !important;
            color: var(--text) !important;
        }

/* ============================================== */
/* GRID PAGER */
/* ============================================== */

[data-theme="dark"] .k-pager,
[data-theme="dark"] .k-grid-pager,
[data-theme="dark"] .k-pager-wrap {
    background-color: var(--header-bg) !important;
    border-color: var(--border) !important;
    color: var(--text) !important;
}

    /* Pager Info Text */
    [data-theme="dark"] .k-pager-info,
    [data-theme="dark"] .k-pager-numbers-wrap,
    [data-theme="dark"] .k-pager .k-label {
        color: var(--text) !important;
    }

    /* Pager Buttons */
    [data-theme="dark"] .k-pager .k-button,
    [data-theme="dark"] .k-pager .k-link,
    [data-theme="dark"] .k-pager-nav {
        background-color: var(--card-bg) !important;
        color: var(--text) !important;
        border-color: var(--border) !important;
    }

        [data-theme="dark"] .k-pager .k-button:hover,
        [data-theme="dark"] .k-pager .k-link:hover {
            background-color: var(--hover-bg) !important;
            border-color: var(--border-strong) !important;
        }

        [data-theme="dark"] .k-pager .k-button.k-selected,
        [data-theme="dark"] .k-pager .k-link.k-selected,
        [data-theme="dark"] .k-pager .k-state-selected {
            background-color: var(--accent) !important;
            color: #ffffff !important;
            border-color: var(--accent) !important;
        }

/* ============================================== */
/* GRID INPUTS AND FILTERS */
/* ============================================== */

/* Search Box and Filter Inputs */
[data-theme="dark"] .k-grid input,
[data-theme="dark"] .k-grid-toolbar input,
[data-theme="dark"] .k-grid-header input,
[data-theme="dark"] .k-filtercell input,
[data-theme="dark"] .k-grid .k-textbox,
[data-theme="dark"] .k-grid .k-input,
[data-theme="dark"] .k-searchbox input {
    background-color: var(--card-bg) !important;
    color: var(--text) !important;
    border-color: var(--border) !important;
}

    [data-theme="dark"] .k-grid input::placeholder,
    [data-theme="dark"] .k-textbox::placeholder {
        color: var(--muted) !important;
    }

    [data-theme="dark"] .k-grid input:focus,
    [data-theme="dark"] .k-filtercell input:focus,
    [data-theme="dark"] .k-grid .k-textbox:focus {
        border-color: var(--accent) !important;
        box-shadow: 0 0 0 3px rgba(var(--accent-rgb), 0.25) !important;
        background-color: var(--hover-bg) !important;
    }

/* ============================================== */
/* BUTTONS IN GRID */
/* ============================================== */

[data-theme="dark"] .k-grid .k-button,
[data-theme="dark"] .k-grid-toolbar .k-button,
[data-theme="dark"] .k-button-solid-base {
    background-color: var(--card-bg) !important;
    color: var(--text) !important;
    border-color: var(--border) !important;
}

    [data-theme="dark"] .k-grid .k-button:hover,
    [data-theme="dark"] .k-grid-toolbar .k-button:hover {
        background-color: var(--hover-bg) !important;
        border-color: var(--border-strong) !important;
    }

/* Primary Buttons */
[data-theme="dark"] .k-grid .k-button-solid-primary,
[data-theme="dark"] .k-button.k-primary {
    background-color: var(--accent) !important;
    color: #ffffff !important;
    border-color: var(--accent) !important;
}

    [data-theme="dark"] .k-grid .k-button-solid-primary:hover {
        background-color: var(--accent-hover) !important;
    }

/* Button Icons */
[data-theme="dark"] .k-grid .k-button .k-icon,
[data-theme="dark"] .k-grid .k-button .k-svg-icon,
[data-theme="dark"] .k-button-icon {
    color: var(--text) !important;
}

/* ============================================== */
/* DROPDOWNS AND COMBOBOXES IN GRID */
/* ============================================== */

[data-theme="dark"] .k-grid .k-dropdown,
[data-theme="dark"] .k-grid .k-combobox,
[data-theme="dark"] .k-grid .k-picker {
    background-color: var(--card-bg) !important;
    border-color: var(--border) !important;
}

[data-theme="dark"] .k-grid .k-dropdown-wrap,
[data-theme="dark"] .k-grid .k-picker-wrap {
    background-color: var(--card-bg) !important;
    border-color: var(--border) !important;
}

/* ============================================== */
/* POPUP LISTS AND ANIMATIONS */
/* ============================================== */

/* Popup Container */
[data-theme="dark"] .k-animation-container,
[data-theme="dark"] .k-animation-container .k-popup,
[data-theme="dark"] .k-list-container,
[data-theme="dark"] .k-popup.k-list-container {
    background-color: var(--card-bg) !important;
    border-color: var(--border) !important;
    box-shadow: var(--shadow-lg) !important;
}

/* List Items */
[data-theme="dark"] .k-list-item,
[data-theme="dark"] .k-list .k-list-item,
[data-theme="dark"] .k-list-optionlabel {
    background-color: var(--card-bg) !important;
    color: var(--text) !important;
}

    [data-theme="dark"] .k-list-item:hover,
    [data-theme="dark"] .k-list-item.k-hover {
        background-color: var(--hover-bg) !important;
    }

    [data-theme="dark"] .k-list-item.k-selected {
        background-color: var(--sel-bg) !important;
        color: var(--accent) !important;
    }

/* ============================================== */
/* CHECKBOXES AND SELECTION */
/* ============================================== */

[data-theme="dark"] .k-checkbox,
[data-theme="dark"] .k-checkbox-wrap {
    background-color: var(--card-bg) !important;
    border-color: var(--border) !important;
}

    [data-theme="dark"] .k-checkbox:checked,
    [data-theme="dark"] .k-checkbox.k-checked {
        background-color: var(--accent) !important;
        border-color: var(--accent) !important;
    }

/* ============================================== */
/* COLUMN MENU */
/* ============================================== */

[data-theme="dark"] .k-column-menu,
[data-theme="dark"] .k-grid-column-menu {
    background-color: var(--card-bg) !important;
    border-color: var(--border) !important;
}

    [data-theme="dark"] .k-column-menu .k-menu-item {
        color: var(--text) !important;
    }

        [data-theme="dark"] .k-column-menu .k-menu-item:hover {
            background-color: var(--hover-bg) !important;
        }

/* ============================================== */
/* GROUPING */
/* ============================================== */

[data-theme="dark"] .k-grouping-header,
[data-theme="dark"] .k-grid-grouping-row {
    background-color: var(--header-bg) !important;
    color: var(--text) !important;
    border-color: var(--border) !important;
}

[data-theme="dark"] .k-grouping-row > td {
    background-color: var(--header-bg) !important;
}

/* ============================================== */
/* FILTER MENU */
/* ============================================== */

[data-theme="dark"] .k-filter-menu,
[data-theme="dark"] .k-grid-filter-popup {
    background-color: var(--card-bg) !important;
    border-color: var(--border) !important;
}

/* ============================================== */
/* LOADING PANEL */
/* ============================================== */

[data-theme="dark"] .k-loading-mask,
[data-theme="dark"] .k-grid .k-loading-mask {
    background-color: rgba(15, 23, 42, 0.8) !important;
}

[data-theme="dark"] .k-loading-text {
    color: var(--text) !important;
}

/* ============================================== */
/* SCROLLBARS IN GRID */
/* ============================================== */

[data-theme="dark"] .k-grid-content::-webkit-scrollbar,
[data-theme="dark"] .k-grid-header-wrap::-webkit-scrollbar {
    width: 10px;
    height: 10px;
}

[data-theme="dark"] .k-grid-content::-webkit-scrollbar-track,
[data-theme="dark"] .k-grid-header-wrap::-webkit-scrollbar-track {
    background-color: var(--app-bg);
}

[data-theme="dark"] .k-grid-content::-webkit-scrollbar-thumb,
[data-theme="dark"] .k-grid-header-wrap::-webkit-scrollbar-thumb {
    background-color: var(--border-strong);
    border-radius: 5px;
    border: 2px solid var(--app-bg);
}

    [data-theme="dark"] .k-grid-content::-webkit-scrollbar-thumb:hover,
    [data-theme="dark"] .k-grid-header-wrap::-webkit-scrollbar-thumb:hover {
        background-color: #64748b;
    }

/* ============================================== */
/* LINKS IN GRID */
/* ============================================== */

[data-theme="dark"] .k-grid a,
[data-theme="dark"] .k-grid .k-link {
    color: var(--accent) !important;
}

    [data-theme="dark"] .k-grid a:hover,
    [data-theme="dark"] .k-grid .k-link:hover {
        color: var(--accent-hover) !important;
    }

/* ============================================== */
/* EDITOR CELLS */
/* ============================================== */

[data-theme="dark"] .k-grid-edit-row > td {
    background-color: var(--hover-bg) !important;
}

/* ============================================== */
/* NO RECORDS MESSAGE */
/* ============================================== */

[data-theme="dark"] .k-grid-norecords,
[data-theme="dark"] .k-no-data {
    background-color: var(--card-bg) !important;
    color: var(--muted) !important;
}

/* ============================================== */
/* FROZEN COLUMNS */
/* ============================================== */

[data-theme="dark"] .k-grid-content-locked,
[data-theme="dark"] .k-grid-header-locked {
    background-color: var(--card-bg) !important;
    border-color: var(--border) !important;
}

/* ============================================== */
/* IMPORTANT NOTES */
/* ============================================== */
/*
This is an ENHANCED version of the Telerik fix with more aggressive selectors.
Use this if the standard sidebar-dark-theme-fix.css doesn't work.

CRITICAL REQUIREMENTS:
1. This file MUST load AFTER Telerik CSS
2. data-theme="dark" MUST be on <html> or <body>
3. appearance-base.css MUST load before this file
4. Hard refresh required after adding (Ctrl + Shift + R)

If grids are still white after using this file:
1. Open DevTools (F12) → Network tab
2. Verify this file loads AFTER kendo-theme-default/all.css
3. Check Console for CSS errors
4. Run the diagnostic tool (DIAGNOSTIC_TOOL.html)
*/
